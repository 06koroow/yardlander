<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Yardlander
    </title>
    <link rel="stylesheet" href="index.css">
    <script src="./config/index.js"></script>
    <link rel="shortcut icon" type="image/jpeg" href="#">
</head>
<body class="body">
    <header class="header">
        <nav>
            <ul>
                <li><a href="#home">Home</a></li>
                <li><a href="#live">Live</a></li>
                <li><a href="#media">Media</a></li>
            </ul>
        </nav>
    </header>
    <main>
        <div class="backgroundVideos">
            <video class="desktopBackground" autoplay muted loop src="./public/2022 05 08 GC Sting No Text Landscape.mov"></video>
            
            <video src="./public/GC Sting no text.mp4" class="mobileBackground" autoplay muted loop></video>
        </div>
        <div class="home" id="home">
                <h1>Yardlander</h1><div class="container">
                <img src="./public/artwork.jpeg" alt=""></div>
                <p>New Single Grow/Change scheduled for release 27th May!</p>
                <a class="presaveLink" href="https://distrokid.com/hyperfollow/yardlander/growchange">Pre-Save Grow/Change Here</a>
                <div class="externalLinks">
                    <a href="https://open.spotify.com/artist/420PkG61dGnfgkvnP3nFWN?si=fvefEpYaS-2oy2JGPeF_VQ"><img src="./public/spotify.svg" alt="Yardlander Spotify"></a>
                    <a href="https://www.instagram.com/yardlander/?hl=en"><img src="./public/instagram.svg" alt="Yardlander Instagram"></a>
                    <a href="https://www.tiktok.com/@yardlander?is_from_webapp=1&sender_device=pc"><img src="./public/tiktok.svg" alt="Yardlander TikTok"></a>
                    <a href="##https://www.youtube.com/channel/UCETHPCjWcuRAfp6NU_cuQtQ"><img src="./public/youtube.svg" alt="Yardlander Youtube"></a>
                </div>
            </div>
        <div class="live" id="live">
            <h1>Yardlander<br> Live</h1>
            <div id="showContainer">
                <div class="showDetails">

                </div>
                <img src="./public/yardlander-shortlist_14.jpg" alt="">
            </div>
        </div>
        <div class="media" id="media">
            <h1>Listen on Spotify:</h1>
            <iframe class="spotifyPlayer" src="https://open.spotify.com/embed/artist/420PkG61dGnfgkvnP3nFWN?utm_source=generator&theme=0" width="100%" height="380" frameBorder="0" allowfullscreen="" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"></iframe>
            <img src="./public/yardlander-shortlist_10.jpg" alt="">
            
        </div>
        <div class="footer">
            <form action="./config/mailingList.db" id="mailingListForm">
                <label for="mailingList">Want to be first to know about live shows, releases and more? Join our mailing list:</label>
                <input type="email" id="mailingList">
                <button type="submit">Submit</button>
            </form>
        </div>
    </main>
<script>
   const mailingListForm = document.querySelector("#mailingListForm");
   mailingListForm.addEventListener("submit", handleFormSubmit);


   async function handleFormSubmit(event){
       event.preventDefault();
       const form = event.currentTarget;
       const url = form.action;
       try{
           const formData = new formData(form);
           const responseData = await postFormDataAsJson({url, formData});
           console.log({responseData});
       } catch (error) {
           console.error(error);
       }
       }
   
       async function postFormDataAsJson({url,formData}){
        const plainFormData = Object.fromEntries(formData.entries());
	    const formDataJsonString = JSON.stringify(plainFormData);  
        const fetchOptions = {
            method:"POST",
            headers:{
                "Content-Type": "application/json",
                "Accept" : "application/json"
            },
            body: formDataJsonString,
        };

        const response = await fetch(url, fetchOptions);
        if(!response.ok){
            const errorMessage = await response.text();
            throw new Error(errorMessage);
        }
        return response.json();
        }
       

</script>
</body>
</html>